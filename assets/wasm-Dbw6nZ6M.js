import{L as n}from"./index--Cfhpedu.js";let r=0;const c={},d=async(s,e)=>{const l=new Promise((t,o)=>{c[++r]={resolve:t,reject:o}});window.wasm.postMessage({type:"git-call",command:s,args:e,callbackId:r});const a=await l;if(!a.ok){const t=typeof a.res=="string"?a.res:a.res.message;throw e?.creds?.accessToken&&(e.creds.accessToken="<redacted>"),new n(`git (${s}, ${a.res.class??"<unknown class>"}, ${a.res.code??"<unknown code>"})`,`${t?.trim()}
Args: ${JSON.stringify(e,null,4)}`,a.res.class,a.res.code,s)}return a.res},k=s=>{if(!(s.data.type=="git-call"&&s.data.callbackId))return;const e=c[s.data.callbackId];delete c[s.data.callbackId],e.resolve(s.data)};export{d as callGitWasm,k as onGitWasmCallback};
