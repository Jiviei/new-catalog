import{I as n}from"./DFPIOError-BdIHcG5c.js";let l=0;const r={},i=async(a,t)=>{const c=new Promise((e,o)=>{r[++l]={resolve:e,reject:o}});window.wasm.postMessage({type:"fs-call",command:a,args:t,callbackId:l});const s=await c;if(!s.ok){const e=typeof s.res=="string"?JSON.parse(s.res):s.res;throw new n({name:`IO (${a})`,code:e.name,message:`${e.name}: ${e.message};
args: ${JSON.stringify(t,null,4)}`})}return s.res},m=a=>{if(!(a.data.type=="fs-call"&&a.data.callbackId))return;const t=r[a.data.callbackId];delete r[a.data.callbackId],t.resolve(a.data)};export{i as callFSWasm,m as onFSWasmCallback};
